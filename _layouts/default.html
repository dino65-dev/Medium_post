<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <!-- MathJax for math equations -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <!-- Custom styles for sidebar -->
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
        }
        .container {
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 280px;
            background-color: #f8f9fa;
            border-right: 1px solid #e1e4e8;
            padding: 20px 20px 20px 25px;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
        }
        .main-content {
            margin-left: 280px;
            padding: 20px 40px;
            flex: 1;
            background-color: #ffffff;
        }
        .category {
            margin-bottom: 30px;
        }
        .category h3 {
            color: #0366d6;
            font-size: 18px;
            margin: 0 0 15px 0;
            font-weight: 600;
            border-bottom: 2px solid #0366d6;
            padding-bottom: 8px;
        }
        .category h4 {
            color: #586069;
            font-size: 14px;
            margin: 15px 0 10px 0;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .category ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .category ul li {
            margin: 8px 0;
        }
        .category ul li a {
            color: #24292e;
            text-decoration: none;
            font-size: 14px;
            padding: 6px 12px;
            display: block;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        .category ul li a:hover {
            background-color: #f1f8ff;
            color: #0366d6;
            text-decoration: none;
        }
        .nested {
            margin-left: 20px;
        }
        .page-title {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar with Auto-Generated Navigation -->
        <nav class="sidebar">
            <!-- Mathematics Section -->
            <div class="category">
                <h3>üìê Mathematics</h3>
                {% assign math_pages = site.pages | where_exp: "page", "page.path contains 'mathematics/'" | where_exp: "page", "page.path contains '.md'" %}
                {% if math_pages.size > 0 %}
                    <ul>
                        {% for page in math_pages %}
                            {% unless page.path contains '_' %}
                                <li><a href="{{ page.url | relative_url }}">{{ page.title | default: page.name | remove: '.md' }}</a></li>
                            {% endunless %}
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="font-size: 12px; color: #586069; margin: 10px 0;">No mathematics pages found</p>
                {% endif %}
                
                <!-- Mathematics Subcategories -->
                {% assign math_subcategories = site.pages | where_exp: "page", "page.path contains 'mathematics/'" | map: "path" | split: "/" | uniq %}
                {% for subcat in math_subcategories %}
                    {% if subcat contains 'mathematics' and subcat != 'mathematics' %}
                        {% assign subcat_pages = site.pages | where_exp: "page", "page.path contains subcat" | where_exp: "page", "page.path contains '.md'" %}
                        {% if subcat_pages.size > 0 %}
                            <h4>{{ subcat | replace: 'mathematics/', '' | replace: '-', ' ' | capitalize }}</h4>
                            <ul class="nested">
                                {% for page in subcat_pages %}
                                    {% unless page.path contains '_' %}
                                        <li><a href="{{ page.url | relative_url }}">{{ page.title | default: page.name | remove: '.md' }}</a></li>
                                    {% endunless %}
                                {% endfor %}
                            </ul>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            
            <!-- Equations Section -->
            <div class="category">
                <h3>üßÆ Equations</h3>
                {% assign equation_pages = site.pages | where_exp: "page", "page.path contains 'equations/'" | where_exp: "page", "page.path contains '.md'" %}
                {% if equation_pages.size > 0 %}
                    <ul>
                        {% for page in equation_pages %}
                            {% unless page.path contains '_' %}
                                <li><a href="{{ page.url | relative_url }}">{{ page.title | default: page.name | remove: '.md' }}</a></li>
                            {% endunless %}
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="font-size: 12px; color: #586069; margin: 10px 0;">No equation pages found</p>
                {% endif %}
                
                <!-- Equations Subcategories -->
                {% assign eq_dirs = '' %}
                {% for page in site.pages %}
                    {% if page.path contains 'equations/' and page.path contains '.md' %}
                        {% assign path_parts = page.path | split: '/' %}
                        {% for part in path_parts %}
                            {% if forloop.index > 1 and part != page.name and part != '' %}
                                {% unless eq_dirs contains part %}
                                    {% assign eq_dirs = eq_dirs | append: part | append: ',' %}
                                {% endunless %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                {% endfor %}
                
                {% assign eq_dirs_array = eq_dirs | split: ',' | uniq %}
                {% for subdir in eq_dirs_array %}
                    {% if subdir != '' and subdir != 'equations' %}
                        {% assign subdir_pages = site.pages | where_exp: "page", "page.path contains subdir" | where_exp: "page", "page.path contains '.md'" %}
                        {% if subdir_pages.size > 0 %}
                            <h4>{{ subdir | replace: '-', ' ' | replace: '_', ' ' | capitalize }}</h4>
                            <ul class="nested">
                                {% for page in subdir_pages %}
                                    {% unless page.path contains '_' %}
                                        <li><a href="{{ page.url | relative_url }}">{{ page.title | default: page.name | remove: '.md' }}</a></li>
                                    {% endunless %}
                                {% endfor %}
                            </ul>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            
            <!-- Posts Section -->
            <div class="category">
                <h3>üìù Posts</h3>
                {% assign post_pages = site.pages | where_exp: "page", "page.path contains 'posts/'" | where_exp: "page", "page.path contains '.md'" %}
                {% if post_pages.size > 0 %}
                    <ul>
                        {% for page in post_pages %}
                            {% unless page.path contains '_' %}
                                <li><a href="{{ page.url | relative_url }}">{{ page.title | default: page.name | remove: '.md' }}</a></li>
                            {% endunless %}
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="font-size: 12px; color: #586069; margin: 10px 0;">No post pages found</p>
                {% endif %}
                
                <!-- Posts Subcategories -->
                {% assign post_dirs = '' %}
                {% for page in site.pages %}
                    {% if page.path contains 'posts/' and page.path contains '.md' %}
                        {% assign path_parts = page.path | split: '/' %}
                        {% for part in path_parts %}
                            {% if forloop.index > 1 and part != page.name and part != '' %}
                                {% unless post_dirs contains part %}
                                    {% assign post_dirs = post_dirs | append: part | append: ',' %}
                                {% endunless %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                {% endfor %}
                
                {% assign post_dirs_array = post_dirs | split: ',' | uniq %}
                {% for subdir in post_dirs_array %}
                    {% if subdir != '' and subdir != 'posts' %}
                        {% assign subdir_pages = site.pages | where_exp: "page", "page.path contains subdir" | where_exp: "page", "page.path contains '.md'" %}
                        {% if subdir_pages.size > 0 %}
                            <h4>{{ subdir | replace: '-', ' ' | replace: '_', ' ' | capitalize }}</h4>
                            <ul class="nested">
                                {% for page in subdir_pages %}
                                    {% unless page.path contains '_' %}
                                        <li><a href="{{ page.url | relative_url }}">{{ page.title | default: page.name | remove: '.md' }}</a></li>
                                    {% endunless %}
                                {% endfor %}
                            </ul>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            
            <!-- Additional Pages (any other .md files) -->
            <div class="category">
                <h3>üìÑ Other Pages</h3>
                {% assign other_pages = site.pages | where_exp: "page", "page.path contains '.md'" | where_exp: "page", "page.path != 'index.md'" %}
                {% assign filtered_pages = '' | split: '' %}
                {% for page in other_pages %}
                    {% unless page.path contains 'mathematics/' or page.path contains 'equations/' or page.path contains 'posts/' or page.path contains '_' %}
                        {% assign filtered_pages = filtered_pages | push: page %}
                    {% endunless %}
                {% endfor %}
                
                {% if filtered_pages.size > 0 %}
                    <ul>
                        {% for page in filtered_pages %}
                            <li><a href="{{ page.url | relative_url }}">{{ page.title | default: page.name | remove: '.md' }}</a></li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="font-size: 12px; color: #586069; margin: 10px 0;">No other pages found</p>
                {% endif %}
            </div>
        </nav>
        
        <!-- Main Content Area -->
        <main class="main-content">
            {{ content }}
        </main>
    </div>
</body>
</html>
